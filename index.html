<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">

    <link rel="shortcut icon" type="imagex/png" href="img/nuvem2.svg">


    <title>DNC Weather</title>

    <style>
        * {
            font-family: 'inter';
        }

        body {
            background-color: #F2F2F2;
        }
    </style>
</head>

<body>

    <header class="p-3 mb-2 bg-primary text-white ">
        <div class="row align-items-center">
            <div class="col-4 ">
                <h1>DncWeather</h1>
            </div>
            <div class="col">
                <div class="row">
                    <div class="col-7"></div>
                    <div class="col text-end">
                        <a href="#endereco"
                            class="fs-5 link-light link-offset-2 link-offset-3-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover">Endereços</a>
                    </div>
                    <div class="col text-end">
                        <a href="#previsaoTempo"
                            class="fs-5 link-light link-offset-2 link-offset-3-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover">Previsão
                            do tempo</a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <section>
        <div class="row align-items-center mt-5 ">
            <div class="col-3"></div>
            <div class="col-4">
                <h1 class="fw-bold">Descubra Mais com Precisão: <br> Previsões do Tempo e <br> endereços em tempo real.
                </h1>
            </div>
            <div class="col-4">
                <img class="pb-5" src="img/nuvem.svg" alt="nuvem" width="250px">
            </div>
        </div>
    </section>

    <div class="row mt-5">
        <div class="col-2"></div>
        <div id="formulario" class="col-8 bg-white rounded-5 pb-3">
            <div class="row mt-5">
                <div class="col-2"></div>
                <div class="col-8">
                    <form action="https://api.sheetmonkey.io/form/oPg7nkHmbmCk1YLnGuxduj" method="post" id="form-page" target="_blank">
                        <label class="ms-1 pb-2 fs-5">Primeiro Nome:</label>
                        <div class="form-floating mb-3">
                            <input type="name" class="form-control" id="nome" name="Name" required>
                            <label for="floatingInput">Insira seu primeiro nome</label>
                        </div>
                        <label class="ms-1 pb-2 fs-5">E-mail:</label>
                        <div class="form-floating mb-3">
                            <input type="email" class="form-control" id="email" name="Email" required>
                            <label for="floatingInput">Insira seu e-mail</label>
                        </div>
                        <label class="ms-1 pb-2 fs-5">Digite o CEP:</label>
                        <div class="form-floating mb-3">
                            <input type="number" class="form-control" id="cep" name="CEP"  required>
                            <label for="floatingInput">Insira o CEP</label>
                        </div>
                        <label class="ms-1 pb-2 fs-5">Digite a latitude e longitude para saber a previsão:</label>

                        <div class="row">
                            <div class="form-floating mb-3 col">
                                <input type="text" class="form-control" id="latitude" name="Latitude" required>
                                <label for="floatingInput" class="ms-2">Latitude</label>
                            </div>
                            <div class="form-floating mb-3 col">
                                <input type="text" class="form-control" id="longitude" name="Longitude" required>
                                <label for="floatingInput" class="ms-2">Longitude</label>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary mt-3 mb-3 col-12">Acessar</button>

                    </form>

                </div>
            </div>
        </div>
    </div>

    <section id="endereco">
        <div class="row align-items-center mt-5 ">
            <div class="col-3"></div>
            <div class="col-4">
                <h1 class="fw-bold">Resultado da busca por CEP:</h1>
            </div>
            <div class="col-4">
                <img class="pb-5" src="img/pointer.svg" alt="pointer" width="130px">
            </div>
        </div>
    </section>

    <div class="row mt-5">
        <div class="col-2"></div>
        <div class="col-8 bg-primary rounded-top-4 text-white text-center pb-2 pt-2">
            <div class="row">
                <div class="col">Logradouro/nome</div>
                <div class="col">Bairro/Distrito</div>
                <div class="col">Localidade/UF</div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-2"></div>
        <div class="col-8 bg-white rounded-bottom-4 text-center pb-2 pt-2">
            <div class="row">
                <div class="col">
                    <p id="logradouro">Justino Cobra</p>
                </div>
                <div class="col">
                    <p id="bairro">Vila Ema</p>
                </div>
                <div class="col">
                    <p id="uf">SP</p>
                </div>
            </div>
        </div>
    </div>

    <section id="previsaoTempo">
        <div class="row align-items-center mt-5 ">
            <div class="col-3"></div>
            <div class="col-4">
                <h1 class="fw-bold">Previsão do tempo na região:</h1>
            </div>
            <div class="col-4">
                <img class="pb-5" src="img/nuvem2.svg" alt="nuvem" width="130px">
            </div>
        </div>
    </section>

    <div class="row">
        <div class="col-2"></div>
        <div class="col-8 bg-white rounded-4 text-center ">
            <div class="row mt-3">
                <div class="col-2"></div>
                <div class="col-8">
                    <p id="previsao" class="fs-5 fw-bold">Previsão de tempo de acordo com a região: 24° C</p>
                </div>
            </div>
        </div>
    </div>

    <footer class="p-3 mb-2 mt-5 bg-primary text-white ">
        <div class="row">
            <div class="col">
                <h1 class="fs-5 text-end">Termos de Uso | Política de Privacidade</h1>
            </div>
        </div>
    </footer>

    <script>
        document.getElementById('form-page').addEventListener('submit', function (event) {
            getAddressByCep();
            getPrevisao();
        });
        async function getAddressByCep() {
            const cep = document.getElementById('cep').value;
            try {
                const response = await fetch('https://viacep.com.br/ws/' + cep + '/json/');
                const data = await response.json();
                console.log(data);
                document.getElementById('logradouro').innerHTML = data.logradouro;
                document.getElementById('bairro').innerHTML = data.bairro;
                document.getElementById('uf').innerHTML = data.uf;
            } catch (error) {
                document.getElementById('logradouro').innerHTML = "";
                document.getElementById('bairro').innerHTML = "";
                document.getElementById('uf').innerHTML = "";
                alert('CEP inserido não localizado.');
            }
        }

        async function getPrevisao() {
            const lat = document.getElementById('latitude').value;
            const long = document.getElementById('longitude').value;
            try {
                const response = await fetch('https://api.open-meteo.com/v1/forecast?latitude=' + lat + '&longitude=' + long + '&hourly=temperature_2m');
                const data = await response.json();
                console.log(data);
                document.getElementById('previsao').innerHTML = 'Previsão de tempo de acordo com a região: ' + data.hourly.temperature_2m[12] + '° C'
            } catch (error) {
                alert("Latitude e Longitudes inseridos invalidos.");
            }
        }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
        integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
        crossorigin="anonymous"></script>
</body>

</html>